# 股票筆記管理系統 - 功能說明

## 🆕 新增功能

### 1. 筆記搜尋功能
- **多欄位搜尋**: 支援按股票代碼、股票名稱、筆記內容進行模糊搜尋
- **即時搜尋**: 在搜尋框輸入關鍵字即可即時顯示結果
- **智能排序**: 搜尋結果按相關性排序

**使用方法**:
- 在主頁面的搜尋框中輸入關鍵字
- 點擊搜尋按鈕或按 Enter 鍵
- 系統會顯示所有符合條件的筆記

### 2. 筆記排序功能
- **多欄位排序**: 支援按股票代碼、股票名稱、筆記類型、創建時間排序
- **雙向排序**: 每個欄位都支援升序 (ASC) 和降序 (DESC)
- **視覺化排序**: 點擊表格標頭即可切換排序方式

**排序欄位**:
- **股票代碼**: 按股票代碼字母順序排序
- **股票名稱**: 按股票名稱中文字順序排序
- **筆記類型**: 按 TAG/STORY 類型排序
- **創建時間**: 按筆記創建時間排序

### 3. 筆記編輯功能
- **內容編輯**: 可以修改筆記類型和內容
- **類型切換**: 支援在 TAG 和 STORY 之間切換
- **即時預覽**: 編輯時可以即時看到修改效果

**使用方法**:
- 在筆記列表中點擊「編輯」按鈕
- 修改筆記類型和內容
- 點擊「更新筆記」保存修改
- 點擊「取消」返回主頁面

### 4. 筆記刪除功能
- **安全刪除**: 刪除前會顯示確認對話框
- **永久刪除**: 刪除後無法恢復
- **即時更新**: 刪除後頁面會即時更新

**使用方法**:
- 在筆記列表中點擊「刪除」按鈕
- 確認刪除操作
- 系統會立即刪除該筆記

## 🔧 技術實現

### 後端功能
- **搜尋邏輯**: 使用 SQL LIKE 語句實現模糊搜尋
- **排序邏輯**: 支援多欄位動態排序
- **CRUD 操作**: 完整的創建、讀取、更新、刪除功能
- **資料驗證**: 輸入資料的完整性檢查

### 前端功能
- **響應式設計**: 支援桌面和移動設備
- **即時互動**: 使用 JavaScript 實現動態效果
- **用戶體驗**: 直觀的操作介面和視覺反饋

## 📊 資料庫結構

### notes 表新增欄位
```sql
ALTER TABLE notes ADD COLUMN updated_at TIMESTAMP NOT NULL 
DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP AFTER created_at;
```

### 新增索引
```sql
CREATE INDEX idx_notes_updated_at ON notes(updated_at);
```

## 🚀 使用方法

### 1. 更新資料庫
如果您的資料庫還沒有 `updated_at` 欄位，請執行：
```bash
mysql -u snote -p stock_note_project < update_database.sql
```

### 2. 測試功能
執行測試腳本驗證所有功能：
```bash
python3 test_notes_functionality.py
```

### 3. 啟動應用
```bash
docker-compose up -d
```

## 🎯 功能特色

### 搜尋功能
- **智能匹配**: 支援部分關鍵字匹配
- **多維度搜尋**: 可以搜尋股票、內容、類型等
- **即時結果**: 搜尋結果即時顯示

### 排序功能
- **靈活排序**: 支援多種排序方式
- **狀態保持**: 排序狀態在頁面刷新後保持
- **視覺提示**: 當前排序方式有明顯的視覺提示

### 編輯功能
- **安全編輯**: 只能編輯筆記類型和內容
- **資料保護**: 股票代碼和名稱不可修改
- **版本追蹤**: 自動記錄修改時間

### 刪除功能
- **安全確認**: 防止誤刪除
- **即時更新**: 刪除後列表即時更新
- **資料完整性**: 維護資料庫的完整性

## 🔍 搜尋範例

### 按股票搜尋
- 輸入 "台積電" → 顯示所有台積電相關筆記
- 輸入 "2330" → 顯示台積電相關筆記
- 輸入 "半導體" → 顯示所有半導體相關股票筆記

### 按內容搜尋
- 輸入 "護國神山" → 顯示包含此關鍵字的筆記
- 輸入 "技術" → 顯示包含技術相關內容的筆記

### 按類型搜尋
- 輸入 "TAG" → 顯示所有標籤類型筆記
- 輸入 "STORY" → 顯示所有故事類型筆記

## 📱 響應式設計

系統支援各種設備尺寸：
- **桌面設備**: 完整功能，最佳體驗
- **平板設備**: 適配中等螢幕
- **手機設備**: 優化觸控操作

## 🛠️ 故障排除

### 常見問題
1. **搜尋無結果**: 檢查關鍵字是否正確
2. **排序不生效**: 確認點擊了正確的表格標頭
3. **編輯失敗**: 檢查必填欄位是否完整
4. **刪除失敗**: 確認有刪除權限

### 日誌查看
```bash
docker logs python-app
```

## 🔮 未來規劃

- [ ] 筆記分類標籤系統
- [ ] 筆記匯出功能
- [ ] 筆記分享功能
- [ ] 進階搜尋過濾器
- [ ] 筆記統計分析

---

如有問題或建議，請聯繫開發團隊。
